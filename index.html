<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ‰ CumpleaÃ±os de Nadir - 3 AÃ±os ğŸ¾</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Baloo+2:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --azul: #2563eb;
        --rojo: #ef4444;
        --amarillo: #fde047;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        font-family: "Baloo 2", cursive;
        background: radial-gradient(circle at top, #0f172a, #020617);
        height: 100vh;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #fff;
      }

      /* ğŸš¨ INTRO */
      .intro {
        position: fixed;
        inset: 0;
        background: radial-gradient(circle, #1e3a8a, #000);
        z-index: 3000;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        animation: fadeOut 4s ease 3s forwards;
      }
      .intro h2 {
        font-family: "Fredoka One", cursive;
        font-size: 2.2rem;
        color: #facc15;
        -webkit-text-stroke: 1px #000;
        text-shadow: 0 0 15px #3b82f6, 0 0 30px #1e3a8a, 0 0 60px #60a5fa;
        animation: pulseGlowBlue 1.6s infinite;
        text-align: center;
        padding: 0 1rem;
      }
      @keyframes pulseGlowBlue {
        0% {
          text-shadow: 0 0 8px #60a5fa, 0 0 20px #3b82f6;
        }
        50% {
          text-shadow: 0 0 25px #3b82f6, 0 0 50px #93c5fd;
        }
        100% {
          text-shadow: 0 0 10px #60a5fa, 0 0 25px #2563eb;
        }
      }
      @keyframes fadeOut {
        to {
          opacity: 0;
          visibility: hidden;
        }
      }

      .video-bg {
        position: fixed;
        inset: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        z-index: 0;
        opacity: 0.4;
      }

      .container {
        position: relative;
        z-index: 2;
        width: 95%;
        max-width: 480px;
        height: 90vh;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(25px);
        border-radius: 30px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        overflow: hidden;
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .slide {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transform: translateX(100%);
        transition: opacity 0.8s ease, transform 0.8s ease;
        text-align: center;
      }
      .slide.active {
        opacity: 1;
        transform: translateX(0);
      }

      h1 {
        font-family: "Fredoka One", cursive;
        font-size: 2.2rem;
        color: var(--amarillo);
        -webkit-text-stroke: 1px #000;
        text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8),
          0 0 10px rgba(255, 255, 255, 0.5);
      }

      p {
        font-size: 1.15rem;
        margin: 0.7rem auto;
        width: 85%;
        color: #f8fafc;
        text-shadow: 0 0 6px rgba(0, 0, 0, 0.6);
      }

      .btn {
        background: linear-gradient(90deg, #3b82f6, #ef4444);
        border: none;
        border-radius: 30px;
        padding: 0.9rem 2rem;
        margin-top: 1rem;
        color: #fff;
        font-weight: bold;
        font-size: 1rem;
        cursor: pointer;
      }

      nav {
        position: absolute;
        bottom: 20px;
        width: 100%;
        display: flex;
        justify-content: center;
        gap: 10px;
      }
      .dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #64748b;
      }
      .dot.active {
        background: var(--amarillo);
        box-shadow: 0 0 8px var(--amarillo);
      }

      .character {
        position: absolute;
        width: 150px;
        pointer-events: none;
        filter: drop-shadow(0 6px 8px rgba(0, 0, 0, 0.4));
        animation: bounce 4s ease-in-out infinite alternate;
        transition: opacity 0.6s ease;
      }
      .chase {
        left: -5px;
        bottom: -5px;
      }
      .marshall {
        right: -5px;
        bottom: -5px;
      }
      @keyframes bounce {
        0% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-10px);
        }
        100% {
          transform: translateY(0);
        }
      }

      .logo {
        width: 160px;
        position: absolute;
        top: 5px;
        left: 50%;
        transform: translateX(-50%);
        z-index: 10;
      }

      .confetti,
      .firework {
        position: fixed;
        border-radius: 50%;
        pointer-events: none;
      }

      .confetti {
        top: -10px;
        width: 8px;
        height: 12px;
        opacity: 0.9;
        animation: fall linear infinite;
        z-index: 1;
      }
      @keyframes fall {
        0% {
          transform: translateY(0) rotate(0deg);
        }
        100% {
          transform: translateY(110vh) rotate(360deg);
        }
      }

      .firework {
        width: 4px;
        height: 4px;
        opacity: 0.9;
        animation: burst 1.4s ease-out forwards;
        z-index: 999;
      }

      @keyframes burst {
        0% {
          transform: translate(0, 0) scale(1);
          opacity: 1;
        }
        100% {
          transform: translate(var(--x), var(--y)) scale(0.5);
          opacity: 0;
        }
      }

      /* ğŸ“¸ MODAL SELFIE */
      .modal {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
      .modal.active {
        display: flex;
      }

      .frame {
        position: relative;
        width: 90vw;
        max-width: 380px;
        aspect-ratio: 1 / 1;
        border-radius: 15px;
        border: 6px solid;
        border-image: linear-gradient(45deg, #2563eb, #ef4444) 1;
        overflow: hidden;
        background: linear-gradient(to bottom, #93c5fd, #ffffff);
        display: flex;
        justify-content: center;
        align-items: center;
      }
      video {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }
      .frame img.logo-overlay {
        position: absolute;
        top: 10px;
        width: 100px;
      }
      .caption {
        position: absolute;
        bottom: 8px;
        width: 100%;
        text-align: center;
        font-family: "Fredoka One", cursive;
        color: #1e3a8a;
        -webkit-text-stroke: 1px white;
        font-size: 1.1rem;
      }
      .modal button {
        margin-top: 12px;
        background: linear-gradient(90deg, #3b82f6, #ef4444);
        border: none;
        color: white;
        font-weight: bold;
        padding: 0.8rem 1.6rem;
        border-radius: 20px;
        cursor: pointer;
      }
    </style>
  </head>

  <body>
    <!-- ğŸš¨ INTRO -->
    <div class="intro">
      <h2>ğŸš¨ Â¡Alerta de misiÃ³n! Iniciando protocolo de rescate...</h2>
    </div>

    <video autoplay muted loop class="video-bg">
      <source src="./video.mp4" type="video/mp4" />
    </video>

    <audio id="music" loop autoplay>
      <source src="./paw.mp3" type="audio/mpeg" />
    </audio>

    <img
      src="https://i.pinimg.com/originals/e8/6c/18/e86c188b0eb75d94040999c0d5f14666.png"
      class="logo"
    />

    <div class="container">
      <section class="slide active">
        <h1>ğŸš¨ Â¡Alerta en BahÃ­a Aventura!</h1>
        <p>
          <span
            style="font-size:1.8rem;color:#ffec85;text-shadow:0 0 12px #3b82f6"
            >Â¡Hola, soy Nadir Rosas! ğŸ¾</span
          ><br />
          El alcalde Humdinger ha robado mi pastel ğŸ‚.<br /><br />
          Â¡Necesito tu ayuda para recuperarlo y celebrar mis <strong>3 aÃ±os</strong>!
        </p>
        <button class="btn" onclick="nextSlide()">â¡ï¸ Aceptar misiÃ³n</button>
      </section>

      <section class="slide">
        <h1>ğŸ¶ Â¡Hora de reunir a la Patrulla Canina!</h1>
        <p>
          Chase ğŸš“, Marshall ğŸš’ y Skye ğŸ›©ï¸ ya estÃ¡n listos,<br />
          pero... Â¡necesitamos mÃ¡s hÃ©roes para completar el equipo! ğŸ’ª
        </p>
        <button class="btn" onclick="nextSlide()">â¡ï¸ Â¡SÃ­, cuenta conmigo!</button>
      </section>

      <section class="slide">
        <h1>ğŸ‰ Â¡MisiÃ³n: Fiesta Rescatada!</h1>
        <p>
          Ven a celebrar en nuestra base secreta ğŸ :<br /><br />
          ğŸ“… <strong>SÃ¡bado 18 de octubre</strong><br />
          ğŸ•“ <strong>7:00 p.m.</strong><br />
          ğŸ“ Mz Y3 Lote 7, Urb. Los Licenciados â€“ Ventanilla<br /><br />
          Â¡Te esperamos para celebrar con ladridos y pastel! ğŸ¾
        </p>
        <p id="contador">â³ Calculando dÃ­as restantes...</p>
        <button class="btn" onclick="nextSlide()">â¡ï¸ Finalizar misiÃ³n</button>
      </section>

      <section class="slide">
        <h1>ğŸŒŸ Â¡MisiÃ³n cumplida! ğŸŒŸ</h1>
        <p>
          Â¡Gracias por unirte a la Patrulla Canina para salvar la fiesta de
          Nadir!<br />Â¡Ahora... celebremos juntos! ğŸ‚ğŸ¾
        </p>
        <button class="btn" onclick="confirmar()">ğŸ’¬ Confirmar asistencia</button>
        <a
          class="btn"
          href="https://maps.app.goo.gl/HqakQL1Lj5ysdQ1q7"
          target="_blank"
          >ğŸ“ Ver mapa</a
        >
        <button class="btn" onclick="abrirCamara()">
          ğŸ“¸ Tomarte una foto con los Paw Patrol
        </button>
      </section>

      <nav>
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
      </nav>

      <img
        src="https://i0.wp.com/eltallerdehector.com/wp-content/uploads/2022/08/paw-patrol-png-chase.png?w=800&ssl=1"
        class="character chase"
      />
      <img
        src="https://i0.wp.com/eltallerdehector.com/wp-content/uploads/2022/08/paw-patrol-png-bombero.png?resize=768%2C768&ssl=1"
        class="character marshall"
      />
    </div>

    <!-- ğŸ“¸ MODAL SELFIE -->
    <div class="modal" id="modalCam">
      <div class="frame">
        <video id="camara" autoplay playsinline></video>
        <img
          src="https://i.pinimg.com/originals/e8/6c/18/e86c188b0eb75d94040999c0d5f14666.png"
          class="logo-overlay"
        />
        <div class="caption">ğŸ‰ CumpleaÃ±os de Nadir â€“ 3 AÃ±os ğŸ¾</div>
      </div>
      <button onclick="capturar()">ğŸ“¸ Capturar</button>
      <button onclick="cerrarCamara()">âŒ Cerrar</button>
      <canvas id="foto" style="display:none;"></canvas>
    </div>

    <script>
      const slides = document.querySelectorAll(".slide");
      const dots = document.querySelectorAll(".dot");
      const chase = document.querySelector(".chase");
      const marshall = document.querySelector(".marshall");
      const logo = document.querySelector(".logo");
      const modal = document.getElementById("modalCam");
      const video = document.getElementById("camara");
      const canvas = document.getElementById("foto");
      const music = document.getElementById("music");
      let current = 0;
      let confettiInterval;

      // ğŸµ Intentar reproducir mÃºsica al cargar
      window.addEventListener("load", () => {
        const playAudio = () => {
          music.play().catch(() => {});
          document.removeEventListener("click", playAudio);
        };
        document.addEventListener("click", playAudio);
      });

      const colores = [
        "#f87171",
        "#60a5fa",
        "#facc15",
        "#4ade80",
        "#a78bfa",
        "#f472b6",
      ];

      function lanzarConfeti() {
        for (let i = 0; i < 6; i++) {
          const c = document.createElement("div");
          c.classList.add("confetti");
          c.style.backgroundColor =
            colores[Math.floor(Math.random() * colores.length)];
          c.style.left = Math.random() * 100 + "vw";
          c.style.animationDuration = 3 + Math.random() * 4 + "s";
          document.body.appendChild(c);
          setTimeout(() => c.remove(), 6000);
        }
      }
      confettiInterval = setInterval(lanzarConfeti, 500);

      function nextSlide() {
        slides[current].classList.remove("active");
        dots[current].classList.remove("active");
        current = (current + 1) % slides.length;
        slides[current].classList.add("active");
        dots[current].classList.add("active");

        if (current === 3) {
          clearInterval(confettiInterval);
          chase.style.opacity = marshall.style.opacity = logo.style.opacity = "1";
          setInterval(lanzarFuegos, 800);
        } else if (current >= 2) {
          chase.style.opacity = marshall.style.opacity = logo.style.opacity = "0";
        } else {
          chase.style.opacity = marshall.style.opacity = logo.style.opacity = "1";
        }
      }

      function lanzarFuegos() {
        const x = Math.random() * window.innerWidth;
        const y = Math.random() * (window.innerHeight * 0.5);
        for (let j = 0; j < 30; j++) {
          const fw = document.createElement("div");
          fw.classList.add("firework");
          const angle = (j / 30) * 2 * Math.PI;
          const radius = 100 + Math.random() * 60;
          fw.style.left = `${x}px`;
          fw.style.top = `${y}px`;
          fw.style.backgroundColor =
            colores[Math.floor(Math.random() * colores.length)];
          fw.style.setProperty("--x", `${Math.cos(angle) * radius}px`);
          fw.style.setProperty("--y", `${Math.sin(angle) * radius}px`);
          document.body.appendChild(fw);
          setTimeout(() => fw.remove(), 1500);
        }
      }

      async function abrirCamara() {
        modal.classList.add("active");
        try {
          const stream = await navigator.mediaDevices.getUserMedia({
            video: { facingMode: "user" },
            audio: false,
          });
          video.srcObject = stream;
        } catch {
          alert("No se pudo acceder a la cÃ¡mara ğŸ˜¢");
        }
      }

      function cerrarCamara() {
        modal.classList.remove("active");
        const stream = video.srcObject;
        if (stream) stream.getTracks().forEach((t) => t.stop());
      }

      async function capturar() {
        const ctx = canvas.getContext("2d");
        await new Promise((r) => setTimeout(r, 100));
        const w = video.videoWidth || 640;
        const h = video.videoHeight || 640;
        canvas.width = w;
        canvas.height = h;
        ctx.drawImage(video, 0, 0, w, h);

        const grad = ctx.createLinearGradient(0, 0, w, h);
        grad.addColorStop(0, "#2563eb");
        grad.addColorStop(1, "#ef4444");
        ctx.lineWidth = 30;
        ctx.strokeStyle = grad;
        ctx.strokeRect(15, 15, w - 30, h - 30);

        const logoImg = new Image();
        logoImg.crossOrigin = "anonymous";
        logoImg.src =
          "https://i.pinimg.com/originals/e8/6c/18/e86c188b0eb75d94040999c0d5f14666.png";
        logoImg.onload = () => {
          const lw = w * 0.3,
            lh = lw * 0.6;
          ctx.drawImage(logoImg, w / 2 - lw / 2, 25, lw, lh);
          ctx.font = `${Math.floor(w * 0.045)}px 'Fredoka One'`;
          ctx.fillStyle = "#1e3a8a";
          ctx.textAlign = "center";
          ctx.lineWidth = 3;
          ctx.strokeStyle = "white";
          const txt = "ğŸ‰ CumpleaÃ±os de Nadir â€“ 3 AÃ±os ğŸ¾";
          ctx.strokeText(txt, w / 2, h - 40);
          ctx.fillText(txt, w / 2, h - 40);

          const enlace = document.createElement("a");
          enlace.href = canvas.toDataURL("image/png");
          enlace.download = "nadir-selfie.png";
          enlace.click();
        };
      }

      function confirmar() {
        const msg = encodeURIComponent(
          "Â¡Hola! Confirmo mi asistencia al cumpleaÃ±os de Nadir Rosas ğŸ‚ğŸ¾"
        );
        window.open(`https://wa.me/51953515933?text=${msg}`, "_blank");
      }

      const evento = new Date("2025-10-18T19:00:00-05:00").getTime();
      const cont = document.getElementById("contador");
      setInterval(() => {
        if (!cont) return;
        const now = new Date().getTime();
        const diff = evento - now;
        if (diff <= 0) {
          cont.textContent = "ğŸ‰ Â¡Hoy es el gran dÃ­a!";
          return;
        }
        const d = Math.floor(diff / (1000 * 60 * 60 * 24));
        const h = Math.floor(
          (diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)
        );
        cont.textContent = `â³ Faltan ${d} dÃ­as y ${h} horas para la fiesta ğŸ¥³`;
      }, 1000);
    </script>
  </body>
</html>
